webpackJsonp([2,0],[function(t,e,a){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}var s=a(3),n=e(s),i=a(40),r=e(i),o=a(43),u=e(o),d=a(41),c=e(d);a(32),a(33);var l=a(28),f=e(l),m=a(34),h=e(m);r.default.config.swipe={direction:"horizontal"},r.default.registerCustomEvent("doubletap",{type:"tap",taps:2}),n.default.use(r.default,{name:"v-touch"}),n.default.use(f.default,{preLoad:1.2,loading:"http://ojt3x01ru.bkt.clouddn.com/image/loading/ring.gif",error:"http://ojt3x01ru.bkt.clouddn.com/image/post/Article.png",attempt:2,listenEvents:["scroll"]}),n.default.use(u.default),n.default.use(c.default);new u.default({mode:"history",base:t,routes:[]});new n.default({el:"#app",template:"<App/>",components:{App:h.default}})}).call(e,"/")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,a){var s,n;a(30),s=a(44);var i=a(38);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},function(t,e,a){var s,n;a(29),s=a(45);var i=a(37);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,n._scopeId="data-v-4ae981d8",t.exports=s},function(t,e,a){var s,n;a(31),s=a(46);var i=a(39);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,n._scopeId="data-v-7a88448f",t.exports=s},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"subreddit"},[a("a",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.makeImage(t.item.data.thumbnail),expression:"makeImage(item.data.thumbnail)",arg:"background-image"}],staticClass:"thumbnail",attrs:{href:t.makeUrl(t.item.data.permalink),target:"_self"}}),t._v(" "),a("div",{staticClass:"details"},[a("a",{staticClass:"title",attrs:{href:t.makeUrl(t.item.data.permalink),title:t.item.data.title,target:"_self"}},[t._v("\n\t\t"+t._s(t._f("truncate")(t.item.data.title))+"\n\t")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"stats"},[a("i",{staticClass:"iconfont icon-good"}),t._v("\n\t\t\t"+t._s(t.item.data.score)+"\n\t\t\t"),a("i",{staticClass:"iconfont icon-comment"}),t._v("\n\t\t\t"+t._s(t.item.data.num_comments)+"\n\t\t")])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-touch",{on:{doubletap:t.refresh}},[a("mu-appbar",{staticClass:"app-bar",attrs:{title:"Reddit App"}},[a("mu-icon-button",{attrs:{icon:"menu"},slot:"left"}),t._v(" "),a("mu-icon-menu",{attrs:{icon:"more_vert",value:t.channel.toLowerCase()},on:{change:t.channelChange},slot:"right"},t._l(t.categories,function(t){return a("mu-menu-item",{attrs:{value:t,title:t}})}))],1)],1),t._v(" "),a("subreddits",{staticClass:"container",attrs:{category:t.channel,"refresh-state":t.refreshWhatever}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"subreddits container"},[t.toast?a("mu-toast",{attrs:{message:t.toastMessage},on:{close:t.hideToast}}):t._e(),t._v(" "),a("div",{staticClass:"grid"},[a("mu-row",{attrs:{gutter:""}},[a("mu-col",{attrs:{width:"70",tablet:"50",desktop:"30"}},[a("h2",[t._v(t._s(t._f("capitalize")(t.category)))])]),t._v(" "),a("mu-col",{attrs:{width:"30",tablet:"50",desktop:"60"}},[a("mu-select-field",{directives:[{name:"model",rawName:"v-model",value:t.currentSort,expression:"currentSort"}],attrs:{labelFocusClass:["label-foucs"]},domProps:{value:t.currentSort},on:{input:function(e){t.currentSort=e}}},t._l(t.sortOption,function(t){return a("mu-menu-item",{attrs:{value:t,title:t}})}))],1)],1)],1),t._v(" "),a("ul",{staticClass:"item-list"},t._l(t.subreddits,function(e){return a("ul",[a("li",[a("subreddit",{attrs:{item:e}})],1),t._v(" "),a("mu-divider",{attrs:{shallowInset:""}})],1)})),t._v(" "),a("mu-infinite-scroll",{attrs:{scroller:t.scroller,loading:t.loading,"loading-text":"Loading..."},on:{load:t.loadMore}})],1)},staticRenderFns:[]}},,,,,function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(36),i=s(n);e.default={name:"app",components:{Subreddits:i.default},data:function(){return{channel:"All",categories:["All","Food","Space","Movies","Funny","News"],refreshWhatever:!0}},methods:{channelChange:function(t){this.channel=t},refresh:function(){console.log("refresh"),this.refreshWhatever=!this.refreshWhatever}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"subreddit",props:["item"],data:function(){return{}},methods:{makeImage:function(t){return t},makeUrl:function(t){return"http://reddit.com"+t}},filters:{truncate:function(t){var e=70;return t.length<=e?t:t.substring(0,e-3)+"..."}}}},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(35),i=s(n),r=a(10),o=s(r);e.default={name:"subreddits",props:["category","refreshState"],data:function(){return{subreddits:[],lastID:"",loading:!1,scroller:null,pageLimit:25,currentSort:"Top",sortOption:["Top","Hot","New","Rising"],toast:!1,toastMessage:""}},mounted:function(){this.scroller=window},watch:{category:function(t){this.subreddits=[],this.getData()},currentSort:function(t){this.getData()},refreshState:function(t){this.subreddits=[],this.getData()}},components:{Subreddit:i.default},filters:{capitalize:function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""}},created:function(){this.getData()},methods:{getData:function(){var t=this;o.default.get("https://www.reddit.com/r/"+this.category+"/"+this.currentSort.toLowerCase()+".json?limit="+this.pageLimit).then(function(e){t.subreddits=e.data.data.children,t.lastID=t.subreddits[t.pageLimit-1].kind+"_"+t.subreddits[t.pageLimit-1].data.id}).catch(function(e){t.toastMessage="网络错误，数据获取失败",t.showToast()})},getMoreData:function(){var t=this;o.default.get("https://www.reddit.com/r/"+this.category+"/"+this.currentSort.toLowerCase()+".json?limit="+this.pageLimit+"&after="+this.lastID).then(function(e){t.subreddits=t.subreddits.concat(e.data.data.children);var a=t.subreddits.length;t.lastID=t.subreddits[a-1].kind+"_"+t.subreddits[a-1].data.id}).catch(function(e){t.toastMessage="网络错误，数据获取失败",t.showToast()})},loadMore:function(){var t=this;console.log("Loading"),this.loading=!0,setTimeout(function(){t.getMoreData(),t.loading=!1},2e3)},showToast:function(){var t=this;this.toast=!0,this.toastTimer&&clearTimeout(this.toastTimer),this.toastTimer=setTimeout(function(){t.toast=!1},2e3)},hideToast:function(){this.toast=!1,this.toastTimer&&clearTimeout(this.toastTimer),this.toastMessage=""}}}}]);
//# sourceMappingURL=app.3a99d95b7dbbf78da2b4.js.map